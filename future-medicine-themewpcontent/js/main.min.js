// "use strict";(function(f){var m=f(".head-content-wrapper");var o=f(".footer-content-wrapper");var a=f(".navigation-trigger a:last-child");var x=f(".mobile-links-list-container ul li a:link");var n=f(".mobile-links-list-container");var q=f(".side-menu");var d=q.find("a.side-menu-close-button");var D=a.find("i");var r=f(".lower-nav >ul").find("a");var h=f(".close-banner");var z=f(".video-wrapper >.main-video").find(".content-block a");var e=f(".videos-choser-block ul li").find("a");var v=f(".video-wrapper >.main-video");var u=f(".button-close-modal");var w="";var b="";var i="";var l="";var k="";var A="";var g=f(".inner-topic-article-top");var p=f(".inner-topic-read-more-link");var t=f(".articles-array").find("a");var y=g.find("> .article-image");var c=g.find("> .article-content-wrapper");var j=f(".accordion-content").find(".article-excerpt");var s=f(".subscription-page .benefits ul li .subscription-benefit h3");var q=f(".side-menu").find(".menu");CustomNavigation.InitNavigation(f(".lower-nav"));utilities.MoveExistingImagesToContainerBackgroundCover();f(".owl-carousel").owlCarousel({loop:true,margin:20,nav:true,navText:["<i class='fa fa-chevron-left'></i>","<i class='fa fa-chevron-right'></i>"],responsive:{0:{items:1},992:{items:2},1250:{items:3}}});q.each(function(){f(this).append("<li></li><li></li><li></li><li></li><li></li><li></li>")});z.click(function(){console.log("vidimo se click");f("#exampleModalCenter").find(".video-container iframe").attr("src",f(this).attr("data-video-url"));f("#exampleModalCenter").modal("show")});if(utilities.IsExisty(a)){a.click(function(F){q.each(function(){f(this).removeClass("opened")});var E=n.css("display");C(E);n.slideToggle()})}function C(E){switch(E){case"none":D.removeClass();D.addClass("fa fa-times");return false;break;case"block":D.removeClass();D.addClass("fa fa-bars");break}}x.click(function(){var F=f(this).attr("data-target");if(typeof F!==typeof undefined&&F!==false){var E=f(this).attr("data-target");f(E).addClass("opened");n.slideUp();C("block")}});d.click(function(){f(this).closest(".side-menu").removeClass("opened")});f(window).load(function(){if(utilities.IsExisty(f(".subscription-page"))||utilities.IsExisty(f(".accordion-blocks"))){f(this).trigger("resize")}});f(window).resize(f.throttle(250,function(){utilities.EqualizeElementsHeightByRow(s);utilities.EqualizeElementsHeightByRow(j)}));t.click(function(){return;var E=g.find(".article-content-wrapper").add(g.find("> .article-image"));E.each(function(){f(this).css({opacity:"0"})});w=f(this).find(".background-image-listener-cover").css("background-image");b=f(this).find(".article-title h3").html();i=f(this).find(".article-content.d-none").html();l=f(this).find(".article-next-permalink").html()});y.on("transitionend",function(){var E="<h2>"+b+"</h2>";E+='<div class="inner-content">'+i+"</div>";c.html(E);f(this).find(".background-image-listener-cover").css({"background-image":w});f(this).css({opacity:"1"});c.css({opacity:"1"});f(this).parent().find(".article-read-more-link a").attr("href",l)});p.click(function(){var F=(f(this).closest(".inner-topic-past-isues").find("ul li"));if(!f(this).hasClass("opened")){F.each(function(){f(this).css({"margin-bottom":"40px","padding-bottom":"40px","border-bottom":"1px dashed #848484","max-height":"500px"})});f(this).addClass("opened")}else{F.each(function(G){if(G>3){f(this).css({"margin-bottom":"0","padding-bottom":"0","border-bottom":"0px dashed #848484","max-height":"0"})}});f(this).removeClass("opened");var E=F.eq(4);window.setTimeout(function(){E[0].scrollIntoView({behavior:"smooth"})},2000)}});u.click(function(){f("#exampleModalCenter").find("iframe").each(function(){var E=f(this).attr("src");f(this).attr("src","")});f("#exampleModalCenter").modal("hide")});e.click(function(){var H=f(this).closest(".image-content").find("img").attr("src");var G=f(this).attr("data-video-url");console.log(G);var F=f(this).closest(".content-block").find(".title").html();var E=v.find(".title").html();if(E===F){return}w=H;k=F;A=G;v.css({opacity:"0"})});v.on("transitionend",function(E){f(this).find(".image-content >img").attr("src",w);f(this).find(".content-block a").attr("data-video-url",A);f(this).find(".title").html(k);f(this).css({opacity:"1"})});r.click(function(){f(this).toggleClass("active")});h.click(function(){f(this).closest(".subscribe-add").remove()});function B(){}f(".accordion-trigger").click(function(){var G=f(this).closest(".accordion-item");var E=f(this).find("span.indicator");var H=G.find(".accordion-content");var F=f(".accordion-content");var I=f(".accordion-trigger").find("span.indicator");if(H.hasClass("active")){H.removeClass("active");E.html("+");return}F.each(function(){f(this).removeClass("active")});I.html("+");H.toggleClass("active");E.html("&#8212;")});o.load("footer.html")}(jQuery));


/**
 * User: Agenzzia
 * Web:  www.agenzzia.com
 * Date: 5/31/2017
 * Time: 11:55 AM
 */
"use strict";
(function($) {
    var headerContainer = $('.head-content-wrapper');
    var footerContainer = $('.footer-content-wrapper');

    var mobileMenuTrigger = $('.navigation-trigger a:last-child');
    var mobileLink = $('.mobile-links-list-container ul li a:link');
    var linksContainer = $('.mobile-links-list-container');
    var sideMenu = $('.side-menu');
    var sideMenuCloseButton = sideMenu.find('a.side-menu-close-button');
    var mobileMenuLinkIcon = mobileMenuTrigger.find('i');

    var mainPageTrigger = $('.lower-nav >ul').find('a');

    var bannerCloseButton = $('.close-banner');

    var videoPlayButton = $('.video-wrapper >.main-video').find('.content-block a');

    var videoChoser = $('.videos-choser-block ul li').find('a');
    var mainVideo = $('.video-wrapper >.main-video');
    var closeModalButton = $('.button-close-modal');
    var nextImage = '';
    var nextTitle = '';
    var nextContent = '';
    var nextPermalink = '';
    var nextVideoTitle = '';
    var nextVideoSource = '';

    var innerTopicsTopArticle = $('.inner-topic-article-top');
    var innerTopicReadMoreLink = $('.inner-topic-read-more-link');
    var innerTopicTopArticleChangeTrigger = $('.articles-array').find('a');
    var innerTopArticleMainImage = innerTopicsTopArticle.find('> .article-image');
    var innerTopArticleContent = innerTopicsTopArticle.find('> .article-content-wrapper');

    var accordionArticleExcerpt = $('.accordion-content').find('.article-excerpt');

    var SubscriptionPageBenefitsBlockTitle = $('.subscription-page .benefits ul li .subscription-benefit h3');

    var sideMenu = $('.side-menu').find('.menu');


    /**
     * initializations
     */

    CustomNavigation.InitNavigation($('.lower-nav'));
    utilities.MoveExistingImagesToContainerBackgroundCover();

    $('.owl-carouselPostBlock').owlCarousel({
        loop      : true,
        margin    : 20,
        nav       : true,
        navText   : ["<i class='fa fa-chevron-left'></i>", "<i class='fa fa-chevron-right'></i>"],
        responsive: {
            0   : {
                items: 1
            },
            992 : {
                items: 2
            },
            1250: {
                items: 3
            }
        }
    });

     $('.owl-carouselEvents').owlCarousel({
        loop      : true,
        margin    : 20,
        nav       : false,
        autoplay  : true,
        autoplayTimeout: 3000,
        navText   : ["<i class='fa fa-chevron-left'></i>", "<i class='fa fa-chevron-right'></i>"],
        responsive: {
            0   : {
                items: 1
            },
            992 : {
                items: 2
            },
            1300 : {
                items: 1
            }
        }
    });

    sideMenu.each(function(){
        $(this).append('<li></li><li></li><li></li><li></li><li></li><li></li>');
    });

    /**
     * events
     */

    videoPlayButton.click(function() {
        console.log('vidimo se click');
        $('#exampleModalCenter').find('.video-container iframe').attr('src', $(this).attr('data-video-url'));
        $('#exampleModalCenter').modal('show');
    });

    if(utilities.IsExisty(mobileMenuTrigger)){
        mobileMenuTrigger.click(function(ev) {
            // $(this).removeClass('opened');
            sideMenu.each(function() {
                $(this).removeClass('opened');
            });
            var currentState = linksContainer.css('display');
            SwitchIcon(currentState);
            linksContainer.slideToggle();

            // var icon = $(this).find('i');
            // $('.side-menu').css({'display':'none'});
            $('.side-menu').removeClass('opened');

        });
    }

    function SwitchIcon(currentState) {
        switch(currentState) {
            case 'none':
                mobileMenuLinkIcon.removeClass();
                mobileMenuLinkIcon.addClass('fa fa-times');
                return false;
                break;
            case 'block':
                mobileMenuLinkIcon.removeClass();
                mobileMenuLinkIcon.addClass('fa fa-bars');
                break;
        }
    }

    /**
     * side menu open functionalityu
     */
    mobileLink.click(function() {
        var dataTargetAttribute = $(this).attr('data-target');
        if(typeof dataTargetAttribute !== typeof undefined && dataTargetAttribute !== false){
            var targetSlideMenuId = $(this).attr('data-target');
           
            $(targetSlideMenuId).addClass('opened');
            // $(targetSlideMenuId).css({'display':'block'});
            linksContainer.slideUp();
            SwitchIcon('block');
        }

    });



    // mobileLink.click(function() {
    //     var dataTargetAttribute = $(this).attr('data-target');
    //     if(typeof dataTargetAttribute !== typeof undefined && dataTargetAttribute !== false){
    //         var targetSlideMenuId = $(this).attr('data-target');

    //         // $(targetSlideMenuId).addClass('opened');
    //         $(targetSlideMenuId).css({
    //         	"position" : "fixed",
				// 			"left" : "0",
    //         });
    //         linksContainer.slideUp();
    //         SwitchIcon('block');
    //     }else{
    //     		$('.side-menu').css({
    //         	"position": "absolute",
				// 			"z-index": "100",
				// 			"top": "85px",
				// 			"left": "-100vw",
    //         });
    //     }

    // });




    sideMenuCloseButton.click(function() {
        $(this).closest('.side-menu').removeClass('opened');
    });

    $(window).load(function() {

        if(utilities.IsExisty($('.subscription-page')) || utilities.IsExisty($('.accordion-blocks'))){
            $(this).trigger('resize');
        }

    });

    $(window).resize($.throttle(250, function() {
        utilities.EqualizeElementsHeightByRow(SubscriptionPageBenefitsBlockTitle);
        utilities.EqualizeElementsHeightByRow(accordionArticleExcerpt);

    }));

    innerTopicTopArticleChangeTrigger.click(function() {
        return;
        var targetContainer = innerTopicsTopArticle.find('.article-content-wrapper').add(innerTopicsTopArticle.find('> .article-image'));
        targetContainer.each(function() {
            $(this).css({'opacity': '0'});
        });
        nextImage = $(this).find('.background-image-listener-cover').css('background-image');
        nextTitle = $(this).find('.article-title h3').html();
        nextContent = $(this).find('.article-content.d-none').html();
        nextPermalink = $(this).find('.article-next-permalink').html();
    });

    innerTopArticleMainImage.on('transitionend', function() {
        var newArticleContent = '<h2>' + nextTitle + '</h2>';
        newArticleContent += '<div class="inner-content">' + nextContent + '</div>';
        innerTopArticleContent.html(newArticleContent);

        $(this).find('.background-image-listener-cover').css({
            'background-image': nextImage,

        });
        $(this).css({
            'opacity': '1'
        });
        innerTopArticleContent.css({
            'opacity': '1'
        });
        $(this).parent().find('.article-read-more-link a').attr('href', nextPermalink);

    });

    innerTopicReadMoreLink.click(function() {

        var listItems = ($(this).closest('.inner-topic-past-isues').find('ul li'));
        if(!$(this).hasClass('opened')){
            listItems.each(function() {
                $(this).css({
                    'margin-bottom' : '40px',
                    'padding-bottom': '40px',
                    'border-bottom' : '1px dashed #848484',
                    'max-height'    : '500px'
                });
            })
            $(this).addClass('opened');
        }
        else {
            listItems.each(function(index) {
                if(index > 3){
                    $(this).css({
                        'margin-bottom' : '0',
                        'padding-bottom': '0',
                        'border-bottom' : '0px dashed #848484',
                        'max-height'    : '0'
                    });
                }

            });
            $(this).removeClass('opened');
            var visibleListElement = listItems.eq(4);
            
            window.setTimeout(function() {
                visibleListElement[0].scrollIntoView({
                    behavior: 'smooth'
                })
            }, 2000);
        }

    });

    closeModalButton.click(function() {
        $('#exampleModalCenter').find('iframe').each(function() {
            var el_src = $(this).attr("src");
            $(this).attr("src", '');
        })
        $('#exampleModalCenter').modal('hide');
    });

    videoChoser.click(function() {
        var src = $(this).closest('.image-content').find('img').attr('src');
        var videoSource = $(this).attr('data-video-url');
        console.log(videoSource);
        var title = $(this).closest('.content-block').find('.title').html();
        var checkTitle = mainVideo.find('.title').html();
        if(checkTitle === title) return;
        nextImage = src;
        nextVideoTitle = title;
        nextVideoSource = videoSource
        mainVideo.css({
            'opacity': '0'
        });
    });

    mainVideo.on('transitionend', function(ev) {

        $(this).find('.image-content >img').attr('src', nextImage);
        $(this).find('.content-block a').attr('data-video-url', nextVideoSource);
        $(this).find('.title').html(nextVideoTitle);
        $(this).css({
            'opacity': '1'
        });
    });

    mainPageTrigger.click(function() {
        $(this).toggleClass('active');
    });

    // bannerCloseButton.click(function() {
    //     $(this).closest('.subscribe-add').remove();
    // });

    function Init() {

    };

    $('.accordion-trigger').click(function() {
        var parent = $(this).closest('.accordion-item');
        var indicator = $(this).find('span.indicator');
        var content = parent.find('.accordion-content');
        var allContents = $('.accordion-content');
        var allIndicators = $('.accordion-trigger').find('span.indicator');
        if(content.hasClass('active')){
            content.removeClass('active');
            indicator.html('+');
            return;
        }
        allContents.each(function() {
            $(this).removeClass('active');
        });
        allIndicators.html('+');
        content.toggleClass('active');
        indicator.html('&#8212;');
    });

    footerContainer.load('footer.html');
    

}(jQuery));

